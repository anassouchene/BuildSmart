import{r as s,u as x,o as P,j as e}from"./index-Dtz4I_N3.js";import{a as y,B as j}from"./config-CrOwxi8G.js";import{S as i}from"./sweetalert2.all-rCSAqTKa.js";import{C as S,T as b}from"./Container-DCjkdMuu.js";import{C as E}from"./CssBaseline-CWG29GjU.js";import{P as T}from"./Paper-qxPhMhKx.js";import{T as o}from"./TextField-ODfB-E00.js";import{B as q}from"./Button-DOCNOP_s.js";import"./Select-oXAMuveA.js";import"./useTheme-FR-ZqXOr.js";import"./ButtonBase-B3uAvr5I.js";const _=()=>{const[n,u]=s.useState(""),[l,c]=s.useState(""),[t,p]=s.useState(""),[m,f]=s.useState(""),h=x(),d=P();s.useEffect(()=>{const r=new URLSearchParams(d.search).get("email");r&&u(r)},[d]);const w=a=>{c(a.target.value)},g=a=>{p(a.target.value)},v=a=>{f(a.target.value)},C=async a=>{if(a.preventDefault(),t!==m){i.fire("Erreur","Les mots de passe ne correspondent pas","error");return}try{const r=await y.post(`${j}Account/reset-password`,{email:n,token:l,newPassword:t});console.log(r.data),console.log("--------------------------------------------"),console.log(r.status),r.status===200?(i.fire("Succès","Votre mot de passe a été réinitialisé avec succès","success"),h("/login")):i.fire("Erreur","Une erreur s'est produite lors de la réinitialisation de votre mot de passe","error")}catch(r){console.error("There was a problem with your axios operation:",r)}};return e.jsxs(S,{component:"main",maxWidth:"xs",children:[e.jsx(E,{}),e.jsxs(T,{elevation:3,style:{padding:16},children:[e.jsx(b,{component:"h1",variant:"h5",align:"center",children:"Réinitialiser le mot de passe"}),e.jsxs("form",{onSubmit:C,style:{marginTop:16},children:[e.jsx(o,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Adresse e-mail",name:"email",autoComplete:"email",autoFocus:!0,value:n,disabled:!0}),e.jsx(o,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"code",label:"Code de réinitialisation",name:"code",autoComplete:"code",value:l,onChange:w}),e.jsx(o,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"Nouveau mot de passe",type:"password",id:"newPassword",autoComplete:"new-password",value:t,onChange:g}),e.jsx(o,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirmer le mot de passe",type:"password",id:"confirmPassword",autoComplete:"confirm-password",value:m,onChange:v}),e.jsx(q,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{marginTop:24},children:"Réinitialiser le mot de passe"})]})]})]})};export{_ as default};
